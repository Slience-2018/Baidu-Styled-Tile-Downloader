# 项目改动说明文档

## 最近更新

### 主要功能增强

1. **图片格式可配置**
   - 默认图片保存格式从jpg更改为png
   - 新增`image_format`参数，支持自定义图片格式
   - 新增配置项：`IMAGE_FORMAT = 'png'`
   - 所有相关文件操作（瓦片保存、结果图片保存、边界绘制）均已适配新的格式系统

2. **下载目标更新**
   - 对应配置项：
     - `TARGET_NAME = "北京市"`
     - `TARGET_CODE = 110000`

3. **地图级别提升**
   - 目标地图级别从12级提升到15级
   - 实现更精细的地图细节显示，适用于查看城市街道级别的详细信息
   - 对应配置项：`TARGET_LEVEL = 15`

4. **地图合成功能开启**
   - 启用瓦片合成功能，将下载的瓦片自动合并为完整地图
   - 对应配置项：`MERGE_TO_MAP = True`
   - 生成的合成地图将保存在结果目录中，文件名格式为`result.[IMAGE_FORMAT]`

### 配置文件变更

| 配置项 | 旧值 | 新值 | 说明 |
|-------|------|------|------|
| IMAGE_FORMAT | 无 | 'png' | 新增配置项，设置图片保存格式 |
| TARGET_LEVEL | 12 | 15 | 提高地图缩放级别，显示更详细的地图内容 |
| MERGE_TO_MAP | False | True | 启用瓦片合成功能，自动生成完整地图图片 |

## 使用说明

1. **安装依赖**
   ```shell
   pip install -r requirements.txt
   ```

2. **运行程序**
   ```shell
   python __init__.py
   ```

3. **输出结果**
   - 瓦片文件：保存在 `./res/[行政区名]_[目标要素]_[级别]/tiles/[级别]/[x]/[y].[IMAGE_FORMAT]`
   - 合成地图：保存在 `./res/[行政区名]_[目标要素]_[级别]/result.[IMAGE_FORMAT]`
   - 日志文件：保存在 `./res/[行政区名]_[目标要素]_[级别]/log.txt`

## 地图样式说明

当前使用正常地图样式，保留了地图的主要要素：
- 道路：灰色显示，高速公路橙色高亮，主干道蓝色突出
- 陆地：浅灰色背景
- 水体：浅蓝色
- 绿地：绿色
- 建筑物：灰色
- 兴趣点：保留标签显示

详细样式配置可参考 `config.py` 文件中的 `MY_STYLE` 变量。